<div module="MyShop_OrderHistoryExchangeproduct">
    <div class="title toggle-btn on">
        <h3>교환 상품</h3>
    </div>
    <div id="{$selected_product_div_id}" class="{$display_selected_product|display}">
        <div module="Myshop_selectedProduct" class="changeList">
            <div class="a1">
                <a href="/product/detail.html{$param_product}">
                    <img src="{$product_image}" onerror="this.src='//img.echosting.cafe24.com/thumb/img_product_small.gif';" alt="" />
                </a>
            </div>
            <div>
                <div class="a2">
                    <a href="#none" onclick="{$action_move_item}" class="btnNormal">
                        <i class="xi-close"></i>
                    </a>
                    <p class="name">{$product_name_link}</p>
                    <ul class="option" module="Myshop_optionAll">
                        <li>
                            <div class="name">
                                <span class="optionDesc"><span class="{$product_name_display|display}">{$product_name} : </span>{$option_str} <span class="{$qty_display|display}">({$qty}개)</span></span>
                                <a href="#none" class="btnBasic change {$option_change_display|display}" onclick="{$action_option_change}">옵션변경</a>
                            </div>
                            <div class="optionModify" id="{$option_modify_layer_id}">
                                <div>
                                    <div class="header">
                                        <h3>옵션변경</h3>
                                        <div class="close-btn">
                                            <i class="xi-close" onclick="$('.optionModify').hide();"></i>
                                        </div>
                                    </div>
                                    <div class="content">
                                        <div class="option-prdInfo">
                                            <div class="prd-img"></div>
                                            <div>
                                                <strong>{$product_name}</strong>
                                                <ul class="option-list">
                                                    <li class="option">{$layer_option_str}</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="prdModify">
                                            <ul module="Myshop_optionList">
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                            </ul>
                                            <ul module="Myshop_optionAddList">
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="ec-base-button gCenter">
                                        <a href="#none" class="btnStrong" onclick="{$action_option_modify}">변경</a>
                                        <a href="#none" class="btnNormal" onclick="$('.optionModify').hide();">취소</a>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="name">
                                <span class="optionDesc"><span class="{$product_name_display|display}">{$product_name} : </span>{$option_str} <span class="{$qty_display|display}">({$qty}개)</span></span>
                                <a href="#none" class="btnBasic change {$option_change_display|display}" onclick="{$action_option_change}">옵션변경</a>
                            </div>
                            <div class="optionModify" id="{$option_modify_layer_id}">
                                <div>
                                    <div class="header">
                                        <h3>옵션변경</h3>
                                        <div class="close-btn">
                                            <i class="xi-close" onclick="$('.optionModify').hide();"></i>
                                        </div>
                                    </div>
                                    <div class="content">
                                        <div class="option-prdInfo">
                                            <div class="prd-img"></div>
                                            <div>
                                                <strong>{$product_name}</strong>
                                                <ul class="option-list">
                                                    <li class="option">{$layer_option_str}</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="prdModify">
                                            <ul module="Myshop_optionList">
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                            </ul>
                                            <ul module="Myshop_optionAddList">
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                                <li><span class="optionItem">{$option_name}</span> {$form.option_value}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="ec-base-button gCenter">
                                        <a href="#none" class="btnStrong" onclick="{$action_option_modify}">변경</a>
                                        <a href="#none" class="btnNormal" onclick="$('.layerOptionModify').hide();">취소</a>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="price">
                        {$product_price_front_head}<strong>{$product_price_front}</strong>{$product_price_front_tail}
                        <span class="ref {$product_price_display|display}">{$product_price_back_head}{$product_price_back}{$product_price_back_tail}</span>
                    </div>
                    <div class="total">
                        합계 :
                        <strong>{$sum_price_front_head}{$sum_price_front}{$sum_price_front_tail}</strong>
                        <span class="{$sum_price_display|display}">{$sum_price_back_head}{$sum_price_back}{$sum_price_back_tail}</span>
                    </div>
                </div>
                <div class="a3">
                    <div class="quantity">
                        <a href="javascript:;" class="up" onclick="{$add_shortcut}">
                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_up.gif" alt="수량증가" class="up" />
                        </a>
                        {$form.quantity}
                        <a href="javascript:;" class="down" onclick="{$out_shortcut}">
                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_down.gif" alt="수량감소" class="down" />
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p class="message" id="{$empty_message}">
        선택된 교환상품이 없습니다.<br />
        교환상품 선택없이 교환신청은 가능합니다.
    </p>
</div>

<script>
    jq(() => {
        jq(".exchange-wr #sPrdList .title.toggle-btn").on("click", function () {
            jq(this).toggleClass("on");
            jq(this).parent().find("> div:nth-child(2)").slideToggle();
        });

        // 교환상품 옵션 상품 이미지
        jq(".exchange-wr .changeList").each(function () {
            const thumImg = jq(this).find(".a1 img").clone();
            jq(this).find(".a2 .option .prd-img").append(thumImg);
        });
    });
</script>
