<!--@layout(/layout/basic/layout.html)-->
<!--@css(/myshop/src/myshop.css)-->
<div class="titleArea">
    <h2>교환 신청</h2>
    <span module="Layout_MobileAction">
        <a href="#none" onclick="{$go_back}"><img src="//img.echosting.cafe24.com/skin/mobile_ko_KR/layout/btn_back.gif" width="33" alt="뒤로가기" /></a>
    </span>
</div>

<div module="Myshop_OrderHistoryApplyExchange" class="exchange-wr">
    <!-- @css(/css/module/myshop/orderHistoryApplyExchange.css)-->
    <div class="prd-info">
        <div class="title toggle-btn on">
            <h3>주문 상품 정보</h3>
        </div>
        <div>
            <div class="order-top">
                <strong class="date" title="주문일자">{$order_date_ymd}</strong>
                <span class="number" title="주문번호">[{$order_id}]</span>
            </div>
            <div class="contents">
                <div module="Myshop_products">
                    <div class="orderList">
                        <div class="order-prd">
                            <span class="chk">{$form.checkbox}</span>
                            <div class="a1">
                                <a href="/product/detail.html{$param_product}">
                                    <img src="{$product_image}" onerror="this.src='//img.echosting.cafe24.com/thumb/img_product_small.gif';" alt="" />
                                </a>
                            </div>
                            <div class="right">
                                <div class="a2">
                                    <p class="name">{$product_name_link}</p>
                                    <div class="option {$option_display|display}">
                                        <div>{$option_str}</div>
                                        <ul module="Myshop_optionSet">
                                            <li><strong>{$product_name}</strong>{$option_str} ({$qty}개)</li>
                                            <li><strong>{$product_name}</strong>{$option_str} ({$qty}개)</li>
                                        </ul>
                                    </div>
                                    <div class="price">
                                        {$item_price_raw_front_head}<strong>{$item_price_raw_front}</strong>{$item_price_raw_front_tail}
                                        <span class="{$item_price_ref_display|display}"> {$item_price_raw_back_head}{$item_price_raw_back}{$item_price_raw_back_tail}</span>
                                        <span class="free {$card_installment_display|display}">무이자할부 상품</span>
                                    </div>
                                    <p class="quantity" title="수량">수량 {$quantity}개</p>
                                </div>
                                <div class="a3">
                                    <div>
                                        <a href="javascript:;" class="up" onclick="{$add_shortcut}">
                                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_up.gif" alt="수량증가" class="up" />
                                        </a>
                                        {$form.quantity}
                                        <a href="javascript:;" class="down" onclick="{$out_shortcut}">
                                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_down.gif" alt="수량감소" class="down" />
                                        </a>
                                    </div>
                                    <a class="btnBasic" href="javascript:;" onclick="{$action_modify}">변경</a>
                                </div>
                            </div>
                        </div>
                        <div class="a4">
                            <div class="status">{$cur_state}</div>
                        </div>
                    </div>
                    <div class="orderList">
                        <div class="order-prd">
                            <span class="chk">{$form.checkbox}</span>
                            <div class="a1">
                                <a href="/product/detail.html{$param_product}">
                                    <img src="{$product_image}" onerror="this.src='//img.echosting.cafe24.com/thumb/img_product_small.gif';" alt="" />
                                </a>
                            </div>
                            <div class="right">
                                <div class="a2">
                                    <p class="name">{$product_name_link}</p>
                                    <div class="option {$option_display|display}">
                                        <div>{$option_str}</div>
                                        <ul module="Myshop_optionSet">
                                            <li><strong>{$product_name}</strong>{$option_str} ({$qty}개)</li>
                                            <li><strong>{$product_name}</strong>{$option_str} ({$qty}개)</li>
                                        </ul>
                                    </div>
                                    <div class="price">
                                        {$item_price_raw_front_head}<strong>{$item_price_raw_front}</strong>{$item_price_raw_front_tail}
                                        <span class="{$item_price_ref_display|display}"> {$item_price_raw_back_head}{$item_price_raw_back}{$item_price_raw_back_tail}</span>
                                        <span class="free {$card_installment_display|display}">무이자할부 상품</span>
                                    </div>
                                    <p class="quantity" title="수량">수량 {$quantity}개</p>
                                </div>
                                <div class="a3">
                                    <div>
                                        <a href="javascript:;" class="up" onclick="{$add_shortcut}">
                                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_up.gif" alt="수량증가" class="up" />
                                        </a>
                                        {$form.quantity}
                                        <a href="javascript:;" class="down" onclick="{$out_shortcut}">
                                            <img src="//img.echosting.cafe24.com/skin/base/common/btn_quantity_down.gif" alt="수량감소" class="down" />
                                        </a>
                                    </div>
                                    <a class="btnBasic" href="javascript:;" onclick="{$action_modify}">변경</a>
                                </div>
                            </div>
                        </div>
                        <div class="a4">
                            <div class="status">{$cur_state}</div>
                        </div>
                    </div>
                </div>
                <div class="ec-base-button gColumn {$select_button_display|display}">
                    <span>선택상품을</span>
                    <a href="#none" class="btnBasic" id="{$same_product_button_id}">동일상품 교환</a>
                    <a href="#none" onclick="{$open_search_layer}" class="btnBasic">다른상품 교환</a>
                </div>
            </div>
        </div>
    </div>

    <!-- 화면을 처음 로딩 할 때 보이는 모듈입니다. 상품을 선택한 이후엔 "exchange_product.html"의 코드를 로딩합니다. -->
    <div id="{$exchange_product_list_id}">
        <div class="exchangeProduct {$exchange_product_list_display|display}">
            <div class="title">
                <h3>교환 상품</h3>
            </div>
            <p class="message">
                선택된 교환상품이 없습니다.<br />
                교환상품 선택없이 교환신청은 가능합니다.
            </p>
        </div>
    </div>

    <div class="boardViewCS">
        <div class="title">
            <h3>교환 사유</h3>
        </div>
        <div>
            <div class="info-block t1">
                <p>사유선택</p>
                <div>
                    {$form.reason_select}
                    <span id="{$cs_shipfee_paid_by_id}" class="{$cs_shipfee_paid_by_display|display}">[교환배송비 <span id="{$cs_shipfee_paid_by_who_id}" class="txtEm"></span> 부담]</span>
                </div>
            </div>
            <div class="info-block t2">
                <p>상세사유</p>
                <div>{$form.reason_detail}</div>
            </div>
        </div>
    </div>

    <div class="boardViewCS {$cs_add_item_display|display}">
        <div class="title">
            <h3>추가정보</h3>
        </div>
        <div module="Myshop_Csadd">
            <div class="info-block t3">
                <p>{$item_title}</p>
                <div>
                    {$item_value}
                    <p class="help">{$guide_content}</p>
                </div>
            </div>
            <div class="info-block t4">
                <p>{$item_title}</p>
                <div>
                    {$item_value}
                    <p class="help">{$guide_content}</p>
                </div>
            </div>
        </div>
    </div>

    <div id="{$check_is_pickup_id}" class="pickup-detail boardViewCS {$pickuplist_display|display}">
        <div class="title">
            <h3>수거신청</h3>
        </div>
        <div>
            <div class="info-block t5">
                <p>수거신청 여부</p>
                <div>
                    {$form.ispickup}
                    <div id="{$pickup_direct_id}" class="{$display_direct_pickup|display}">{$form.pickup_csname} {$form.pickup_invoiceno} {$form.pickup_check}</div>
                    <p class="help">교환할 상품에 대해 "수거 신청"하시면 택배사에 직접 연락하지 않아도 되며, 수거 전 택배기사님이 연락 후 방문합니다.</p>
                </div>
            </div>
        </div>
    </div>
    <div id="{$pickup_detail_id}" class="pickup-detail boardViewCS {$pickup_detail_display|display}">
        <div class="title">
            <h3>수거지 정보</h3>
        </div>
        <div>
            <div class="info-block t6">
                <p>수거지 선택</p>
                <div>{$form.sameaddr}</div>
            </div>
            <div id="{$pickup_sameaddr_id}" class="info-block t7 {$pickup_order_address_display|display}">
                <p>수거지 주소</p>
                <div>
                    {$r_name}<br />
                    ({$r_zipcode}) {$r_addr1} {$r_addr2}<br />
                    {$r_phone1} | {$r_phone2}
                </div>
            </div>
            <div id="{$pickup_name_id}" class="info-block t8 {$pickup_name_display|display}">
                <p>이름</p>
                <div>{$form.pickup_name}</div>
            </div>
            <div id="{$pickup_address_id}" class="info-block t9 {$pickup_address_display|display}">
                <p>주소</p>
                <div>
                    {$form.pickup_zipcode1}
                    <button type="button" id="{$btn_search_rzipcode_id}" class="btnNormal">주소검색</button><br />
                    {$form.pickup_addr1}<br />
                    {$form.pickup_addr2}<span id="{$addr2_word_id}" class="{$addr2_word_display|display}">- 나머지 주소는 선택입력이 가능합니다.</span>
                </div>
            </div>
            <div id="{$pickup_phone1_id}" class="info-block t10 {$pickup_phone1_display|display}">
                <p>일반전화</p>
                <div>{$form.pickup_phone1_}</div>
            </div>
            <div id="{$pickup_phone2_id}" class="info-block t11 {$pickup_phone2_display|display}">
                <p scope="row">휴대전화</p>
                <div>{$form.pickup_phone2_}</div>
            </div>
            <div id="{$pickup_delivery_info_id}" class="info-block t12 {$delivery_info_offer_display|display}">
                <span>
                    <label for="delivery_info_offer_check_box0">{$form.delivery_info_offer_check_box}배송정보제공방침 동의</label>
                    <a href="#none" class="more" onclick="viewDelivery();">내용보기</a>
                    <span id="{$delivery_info_offer_content_id}" class="{$delivery_info_offer_content_mobile_display|display}">{$form.delivery_info_offer_content}</span>
                </span>
            </div>
        </div>
    </div>

    <div id="{$cs_shipfee_payment_id}" class="pickup-detail boardViewCS {$cs_shipfee_payment_display|display}">
        <div class="title">
            <h3>교환배송비 결제 정보</h3>
        </div>
        <div>
            <div class="info-block t13">
                <p>교환배송비</p>
                <div>
                    <span id="{$cs_shipfee_paid_by_select_id}" class="txtEm">교환 사유를 선택하세요.</span>
                    <span id="{$cs_shipfee_paid_by_customer_id}" class="displaynone txtEm"
                        ><span class="txtEm">구매자 책임사유</span>에 의한 교환이므로 교환배송비 <span class="txtEm">{$price_front_head}<span id="{$cs_shipfee_price_slot_id}">{$shipfee_exchange}</span>{$price_front_tail}</span>을 구매자가 부담합니다.</span
                    >
                    <span id="{$cs_shipfee_paid_by_store_id}" class="displaynone txtEm"><span class="txtEm">판매자 책임사유</span>에 의한 교환이므로 교환배송비는 판매자가 부담합니다.</span>
                </div>
            </div>
            <div id="{$cs_shipfee_paymethod_id}" class="info-block t14 displaynone">
                <p>교환배송비<br />결제방법</p>
                <div>{$form.shipfee_paymethod}</div>
            </div>
        </div>
    </div>

    <div class="pickup-detail boardViewCS {$refund_info_display|display}">
        <div class="title">
            <h3>환불정보</h3>
        </div>
        <div class="{$refund_notice_display|display}">
            <div class="info-block t15">
                <p>환불예정금액</p>
                <div>환불예정금액은 판매자가 접수처리 완료 후 '주문상세조회'에서 확인할 수 있습니다.<br />교환상품에 따라 추가결제금액이 발생할 수 있습니다.</div>
            </div>
            <div class="info-block t16">
                <p>배송비 안내</p>
                <div>{$cs_info_desc}</div>
            </div>
        </div>
        <div class="{$refund_account_display|display}">
            <div class="info-block t17">
                <p>환불계좌</p>
                <div>
                    <span id="{$id_acc_full_str}" class="{$acc_full_str_display|display}">{$acc_full_str}</span>
                    <span id="{$id_acc_reg_disp}" class="{$acc_reg_display|display}"><a href="#none" class="btnBasic" onclick="OrderApply.popupAccount('./account.html');">환불계좌등록</a></span>
                    <span id="{$id_acc_mod_disp}" class="{$acc_mod_display|display}"><a href="#none" class="btnBasic" onclick="OrderApply.popupAccount('./account.html');">환불계좌변경</a></span>
                </div>
            </div>
        </div>
    </div>
    {$form.is_new_cs_form}
    <div class="ec-base-button gColumn">
        <a href="/myshop/order/list.html{$back_page_param}" class="btnEm">이전페이지</a>
        <a href="#none" onclick="OrderApply.apply(); return false;" class="btnSubmit">교환신청</a>
    </div>
</div>

<script>
    jq(() => {
        jq(".exchange-wr .title.toggle-btn").on("click", function () {
            jq(this).toggleClass("on");
            jq(this).parent().find("> div:nth-child(2)").slideToggle();
        });
    });
</script>
